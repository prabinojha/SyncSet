<header>
    <div class="hamburger-menu">
        <i class="fas fa-bars"></i>
    </div>
    <a id="anchorLogo" href="/dashboard">
        <img src="/public/logo.png" alt="Logo" id="logo">
    </a>
    <% if (locals.user && locals.domainData) { %>
        <button id="publishButton" class="<%= domainData.published ? 'unpublish' : 'publish' %>">
            <%= domainData.published ? 'Unpublish' : 'Publish' %>
        </button>
    <% } %>
</header>
<div class="overlay"></div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const hamburger = document.querySelector('.hamburger-menu');
        const sidebar = document.querySelector('.sidebar');
        const overlay = document.querySelector('.overlay');

        hamburger.addEventListener('click', function() {
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        });

        overlay.addEventListener('click', function() {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
        });
    });

    // Add publish button functionality
    const publishButton = document.getElementById('publishButton');
    if (publishButton) {
        publishButton.addEventListener('click', async function() {
            const response = await fetch('/toggle-publish', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            if (response.ok) {
                const data = await response.json();
                publishButton.textContent = data.published ? 'Unpublish' : 'Publish';
                publishButton.className = data.published ? 'unpublish' : 'publish';
            }
        });
    }
</script>